# Telegram Bot для проверки API партнёра

Этот бот на aiogram 3.x предназначен для минимального тестирования API партнёра. Он принимает фото, отправляет их на сервер партнёра, получает task_id, позволяет проверять статус и принимает вебхуки.

## Установка и запуск

1. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```

2. Создайте .env файл и заполните переменные:
   - `BOT_TOKEN`: токен бота от @BotFather
   - `PARTNER_API_BASE_URL`: базовый URL API партнёра (https://api.vipsupcloth.com)
   - `API_KEY`: API ключ партнёра
   - `WEBHOOK_URL`: публичный URL для вебхуков (например, https://your-ngrok-url.ngrok.io/webhook/bot)

3. Запустите бота:
   ```
   python main.py
   ```

Бот запустится с вебхуками. Сервер вебхуков будет слушать на порту 8080.

## Тестирование

- Отправьте /start боту в Telegram.
- Отправьте фото — бот загрузит его на API партнёра и вернёт task_id.
- Используйте /check <task_id> для проверки статуса.
- Попросите партнёра отправить тестовый вебхук на ваш /webhook эндпоинт — он залогируется в консоли.

## Структура кода

- `main.py`: основной код бота и сервера вебхуков.
- `.env`: конфигурация.
- `requirements.txt`: зависимости.
